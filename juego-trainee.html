<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-button/paper-button.html">

<link rel="import" href="utils-styles.html">
<link rel="import" href="juego-trainee-modal.html">
<link rel="import" href="juego-trainee-core.html">


<dom-module id="juego-trainee">
  <template>
    <style include="utils-styles">
      :host {
        display: block;
        position: relative;
        font-family: sans-serif;
        background-color: white;
        

        padding: 2rem;
        overflow: hidden;
      }

      paper-button {
        font-family: 'Roboto', 'Noto', sans-serif;
        font-weight: normal;
        font-size: 14px;
        -webkit-font-smoothing: antialiased;
      }

      paper-button.pink {
        color: var(--paper-pink-a200);
        --paper-button-ink-color: var(--paper-pink-a200);
      }

      paper-button.pink:hover {
        background-color: var(--paper-pink-100);
      }

      paper-button.indigo {
        background-color: var(--paper-indigo-500);
        color: white;

        --paper-button-raised-keyboard-focus: {
          background-color: var(--paper-pink-a200) !important;
          color: white !important;
        }

        ;
      }

      paper-button.indigo:hover {
        background-color: var(--paper-indigo-400);
      }

      paper-button.green {
        background-color: var(--paper-green-500);
        color: white;
      }

      paper-button.green[active] {
        background-color: var(--paper-red-500);
      }

      paper-button.disabled {
        color: white;
      }




      juego-trainee-modal.ganador,
      juego-trainee-modal.perdedor {
        --color-text-header: white;
      }

      juego-trainee-modal.ganador {
        --color-background-header: var(--color-ganador);
      }

      juego-trainee-modal.perdedor {
        --color-background-header: var(--color-perdedor);
      }

      .icono-gato,
      .icono-perro {
        position: absolute;
        top: 0;
        font-size: 3rem;
      }

      .icono-gato {
        right: 0;
        transform: rotate(30deg) scale(1.2);
      }

      .icono-perro {
        left: 0;
        transform: rotate(-30deg) scale(1.2);
      }

      .instrucciones {
        color: white;
      }

      .instrucciones>*:not(h2) {
        display: block;
        margin-bottom: 1rem;
      }

      .instrucciones>.txt-titulo {
        font-size: 1.6rem;
        text-align: center;
        margin: .1rem 0 1rem 0;
      }

      .instrucciones>.txt-instrucciones {
        font-size: 1.4rem;
      }

      .instrucciones>.txt-descripcion {
        font-size: 1.2rem;
      }
    </style>
    <paper-button class="pink">link</paper-button>
    <paper-button raised class="indigo">raised</paper-button>
    <paper-button toggles raised class="green">toggles</paper-button>
    <paper-button disabled class="disabled">disabled</paper-button>
    <paper-button raised on-click="abrir">modal dialog</paper-button>

    <paper-dialog id="modal" modal>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
        magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
        consequat.</p>
      <div class="buttons">
        <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
      </div>
    </paper-dialog>

    <span class="icono-perro">üê∂</span>
    <span class="icono-gato">üê±</span>
    <div class="instrucciones">
      <h2 class="txt-titulo">El juego del gato</h2>
      <label class="txt-instrucciones">Instrucciones:</label>
      <span class="txt-descripcion"> Hay un gato escondido dentro de alguna de estas figuras, encu√©ntralo y gana,
        ¬°pero cuidado con los perros, ya que tambien est√°n escondidos entre las figuras buscando al gato!</span>
    </div>
    <juego-trainee-core id="core" cantidad="{{cantidad}}" on-ganador="mostrarModalGanador"
      on-perdedor="mostrarModalPerdedor">
    </juego-trainee-core>
    <juego-trainee-modal class$="{{datosModal.estatus}}" titulo="{{datosModal.titulo}}" mensaje="{{datosModal.mensaje}}"
      mostrar="{{datosModal.mostrar}}">
      <button on-click="reiniciar">Reiniciar</button>
    </juego-trainee-modal>

  </template>

  <script>
    class JuegoTrainee extends Polymer.Element {
      static get is() {
        return 'juego-trainee';
      }
      static get properties() {
        return {
          cantidad: {
            type: Number,
            value: 5
          },
          datosModal: {
            type: Object,
            value: {
              titulo: '',
              mensaje: '',
              mostrar: false,
              estatus: 'defecto'
            }
          }
        };
      }

      abrir(){
        this.$.modal.open();
      }

      ready() {
        super.ready();
      }

      reiniciar() {
        this.set('cantidad', this.get('cantidad'));
        this.$.core.iniciar();
        this.cerrarModal();
      }

      mostrarModalGanador() {
        this.mostrarModal('¬°GANASTE!', '¬°Has encontrado al gato!', 'ganador');
      }
      mostrarModalPerdedor() {
        this.mostrarModal('PERDISTE...', 'Se han acabado tus intentos...', 'perdedor');
      }

      cerrarModal() {
        this.set('datosModal.titulo', '');
        this.set('datosModal.mensaje', '');
        this.set('datosModal.mostrar', false);
        this.set('datosModal.estatus', 'defecto');
      }

      mostrarModal(titulo, mensaje, estatus) {
        this.set('datosModal.titulo', titulo);
        this.set('datosModal.mensaje', mensaje);
        this.set('datosModal.mostrar', true);
        this.set('datosModal.estatus', estatus);
      }
    }

    window.customElements.define(JuegoTrainee.is, JuegoTrainee);
  </script>
</dom-module>